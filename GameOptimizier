if not game:IsLoaded() then
	game.Loaded:Wait()
end
local TS = game:GetService("TeleportService")
local Players = game:GetService("Players")

local function Rejoin()
    local plr = Players.LocalPlayer
    if not plr then return end

    task.defer(function()
        TS:TeleportToPlaceInstance(game.PlaceId, game.JobId, plr)
    end)
end

task.spawn(function()
    local flagtables = {
    ["DFIntPhysicsEMAInverseSmoothingFactor"] = "2074",
    ["FFlagAnimationTrackStepFix"] = "True",
    ["FFlagAnimatorRetargetSkipLowerBodyIK"] = "False",
["FFlagAnimationStreamSourceUseRuntimeSyncPrims"] = "True",
["DFFlagEnableControlRigIkTargets"] = "True",
["DFIntAnimatorRetargetSkipLowerBodyIKDistance10x"] = "0",
  ["FFlagFixKeyframeGeneration"] = "True",
   ["DFFlagAnimatorEnableNewAdornments"] = "True",
  ["FFlagAnimatorRetargetSkipAnkleModification"] = "True",
  ["FFlagKeyframeSequenceUseRuntimeSyncPrims"] = "True",
  ["FFlagHumanoidStateUseRuntimeSyncPrims"] = "True",
  ["FFlagQuaternionPoseCorrection"] = "True",
  ["FFlagRealTimeAnimationEnableRefactor"] = "True",
  ["FFlagAnimationStreamTrackUseRuntimeSyncPrims"] = "True",
    ["NumFramesAllowedToBeAboveError"] = "0",
    ["CorrectServerReplicatorStatsIP"] = "True",
    ["FastGPULightCulling3"] = "True",
["ClientLightingTechnologyChangedTelemetryHundredthsPercent"] = "0",
    ["Network"] = "7",
    ["PerformanceControlFrameTimeMax"] = "1",
        ["DFFlagGraphicsQualityUsageTelemetry"] = "False",
        ["DFIntNetworkQualityResponderMaxWaitTime"] = "1",
            -- Mtu's
          ["DFIntConnectionMTUSize"] = "1240",
          ["DFIntRakNetMtuValue1InBytes"] = "1280",
          ["DFIntRakNetMtuValue2InBytes"] = "1240",
          ["DFIntRakNetMtuValue3InBytes"] = "1200",
        -- L4rd Specials
        ["FFlagDebugRenderingSetDeterministic"] = "True",
        ["DFIntHACDPointSampleDistApartTenths"] = "2147483647",
        ["FIntSSAOMipLevels"] = "1",

        -- Grass
        ["FIntFRMMinGrassDistance"] = "0",
        ["FIntFRMMaxGrassDistance"] = "0",
        ["FIntGrassMovementReducedMotionFactor"] = "0",

        -- L4rd FpsBoost
        ["DFFlagTextureQualityOverrideEnabled"] = "True",
        ["DFIntTextureQualityOverride"] = "0",
        ["DFFlagGameNetFixReplicationSkipBug"] = "True",
        ["DFFlagCorrectCachePolicySkipRedirectCache"] = "True",
        ["DFFlagRakNetFixBwCollapse"] = "False",
        ["DFFlagRakNetDecoupleRecvAndUpdateLoopShutdown"] = "True",
        ["FFlagPushFrameTimeToHarmony"] = "True",
        ["DFFlagSkipSomePropertiesSkip"] = "True",
        ["DFFlagSkipReadDiskCacheRedirects"] = "True",
        ["DFFlagSkipSomeProperties"] = "True",

        -- L4rd Ping Special
        ["DFFlagReplicatorCheckReadTableCollisions"] = "True",
        ["DFFlagDisableDPIScale"] = "False",
        ["DFFlagJointIrregularityOptimization"] = "True",
        ["DFFlagReplicateCreateToPlayer"] = "True",
        ["DFFlagDebugLargeReplicatorForceFullSend"] = "True",
        ["FFlagEnableZstdDictionaryForClientSettings"] = "False",
        ["FFlagOnlyDecrementCompletenessIfReplicating"] = "True",
        ["FFlagDebugDisableOptimizedBytecode"] = "False",
        ["FFlagEnableInGameMenuDurationLogger"] = "False",
        ["DFFlagRakNetUnblockSelectOnShutdownByWritingToSocket"] = "True",
        ["DFFlagReplicatorSeparateVarThresholds"] = "True",
        ["FFlagEnableZstdForClientSettings"] = "False",
        ["FFlagFasterPreciseTime4"] = "True",
        ["DFFlagDebugPerfMode"] = "True",
        ["FFlagDebugCodegenOptSize"] = "True",
        ["DFFlagAnimatorAnywhere"] = "True",
        ["FFlagDebugNextGenReplicatorEnabledWriteCFrameColor"] = "True",
        ["FFlagLuaAppLegacyInputSettingRefactor"] = "True",
        ["DFFlagAcceleratorUpdateOnPropsAndValueTimeChange"] = "True",
        ["DFFlagMergeFakeInputEvents3"] = "True",
        ["DFFlagRakNetUseSlidingWindow4"] = "True",
        ["DFFlagDebugOverrideDPIScale"] = "False",
        ["FFlagContentProviderPreloadHangTelemetry"] = "False",
        ["DFIntInterpolationDtLimitForLod"] = "10",
        ["DFIntSignalRCoreHandshakeTimeoutMs"] = "1000",
        ["DFIntSignalRCoreHubMaxBackoffMs"] = "500",
        ["DFIntMaxProcessPacketsStepsPerCyclic"] = "1500",
        ["DFIntBufferCompressionThreshold"] = "100",
        ["FIntTerrainArraySliceSize"] = "0",
        ["DFFlagAllowRegistrationOfAnimationClipInCoreScripts"] = "True",
        ["DFIntSignalRCoreRpcQueueSize"] = "4096",
        ["FFlagRenderTestEnableDistanceCulling"] = "True",
        ["FFlagRenderSkipReadingShaderData"] = "False",
        ["DFIntSignalRCoreError"] = "1",
        ["DFIntNetworkSchemaCompressionRatio"] = "50",
        ["FFlagDisablePostFx"] = "True",
        ["DFFlagAnimatorFixReplicationASANError"] = "True",
        ["DFIntSignalRCoreHubBaseRetryMs"] = "50",
        ["FFlagRemovedRbxRenderingPreProcessor"] = "False",
        ["DFIntLargePacketQueueSizeCutoffMB"] = "75",
        ["DFFlagRakNetDetectRecvThreadOverload"] = "True",
        ["DFIntSignalRCoreNetworkHandler"] = "1",
        ["DFIntSignalRCoreServerTimeoutMs"] = "500",
        ["DFIntServerBandwidthPlayerSampleRate"] = "2000",
        ["DFIntSignalRCore"] = "1",
        ["DFIntDataSenderRate"] = "2000",
        ["DFIntInitialAccelerationLatencyMultTenths"] = "1",
        ["DFIntSignalRCoreKeepAlivePingPeriodMs"] = "1000",
        ["DFIntRakNetResendRttMultiple"] = "1",
        ["FIntRenderLocalLightFadeInMs"] = "0",
        ["FFlagEnablePreferredTextSizeGuiService"] = "True",
        ["DFIntRakNetLoopMs"] = "15",
        ["DFIntMaxProcessPacketsJobScaling"] = "600",
        ["DFIntCodecMaxIncomingPackets"] = "100",
        ["DFFlagOptimizeClusterCacheAlloc"] = "True",

        -- L4rd LagFix
        ["FIntDebugTextureManagerSkipMips"] = "4",
        ["DFIntWaitOnUpdateNetworkLoopEndedMS"] = "1",
        ["FIntFontSizePadding"] = "2",
        ["FFlagAdServiceEnabled"] = "False",
        ["DFIntDebugFRMQualityLevelOverride"] = "3",
        ["DFIntCSGLevelOfDetailSwitchingDistance"] = "0",
        ["DFIntCSGLevelOfDetailSwitchingDistanceL12"] = "0",
        ["DFIntCSGLevelOfDetailSwitchingDistanceL34"] = "0",
        ["DFIntCSGLevelOfDetailSwitchingDistanceL23"] = "0",
        ["FIntRobloxGuiBlurIntensity"] = "0",
-- Lag Ball
["RakNetClockDriftAdjustmentPerPingMillisecond"] = "2139999999",
["FullscreenTitleBarTriggerDelayMillis"] = "30000000",
["WaitOnRecvFromLoopEndedMS"] = "25",
["RaknetBandwidthPingSendEveryXSeconds"] = "0",
["MaxFramesToSend"] = "0",
["RaknetBandwidthInfluxHundredthsPercentageV2"] = "10000",
["CodecMaxIncomingPackets"] = "250",
["CodecMaxOutgoingFrames"] = "10000",
["InterpolationMaxDelayMSec"] = "0",
["SimSolverResponsiveness"] = "2147483647",
["ClientPacketHealthyAllocationPercent"] = "85",
["MaxAverageFrameDelayExceedFactor"] = "0",
["TrackCountryRegionAPIHundredthsPercent"] = "0",
["NumFramesToCaptureCallStack"] = "0",
["InterpolationAwareTargetTimeLerpHundredth"] = "50",
["MaxProcessPacketsJobScaling"] = "2147483647"
    }

    local function stripPrefix(key)
        return key:gsub("^DFInt", "")
                  :gsub("^DFFlag", "")
                  :gsub("^FString", "")
                  :gsub("^FLog", "")
                  :gsub("^FFlag", "")
                  :gsub("^FInt", "")
    end

    if setfflag then
        local batchSize = 10
        local keys = {}
        for k in pairs(flagtables) do table.insert(keys, k) end

        for i = 1, #keys, batchSize do
            local batch = {unpack(keys, i, math.min(i+batchSize-1, #keys))}
            for _, k in ipairs(batch) do
                local v = flagtables[k]
                pcall(function()
                    local stripped = stripPrefix(k)
                    if getfflag(stripped) ~= nil then
                        setfflag(stripped, v)
                    end
                end)
            end
            task.wait(0.05)
        end

        print("✅")
        task.wait(0.5)
        Rejoin()
    else
        print("❌")
    end
end)
